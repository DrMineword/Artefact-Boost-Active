{
    "data": [
        {
            "id": "a_notif_test_1",
            "html-msg": "<strong>Important Test!</strong><br> This is just a test, <base64=string to decode>",
            "start-show-unix": "0",
            "end-show-unix": "2524604400",
            "colors": ["#007bff", "#ffffff"]
        },
        {
            "id": "a_example",
            "html-msg": "<strong>Maintenance Scheduled:</strong> The site will be down at midnight.",
            "start-show-unix": "0",
            "end-show-unix": "1",
            "colors": ["#ff5733", "#ffffff"]
        }
    ],
    "script": "// Function to inject CSS into the document\nfunction injectCSSJsonMsg() {\n    const styleJsonMsg = document.createElement('style');\n    styleJsonMsg.type = 'text/css';\n    styleJsonMsg.innerHTML = `\n        .notificationJsonMsg {\n            position: fixed;\n            top: 10px;\n            left: 50%;\n            transform: translateX(-50%);\n            padding: 15px;\n            font-size: 16px;\n            border-radius: 5px;\n            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n            z-index: 1000;\n            display: flex;\n            align-items: center;\n        }\n\n        .notificationJsonMsg button {\n            background-color: transparent;\n            border: 1px solid #fff;\n            color: #fff;\n            padding: 5px 10px;\n            cursor: pointer;\n            border-radius: 3px;\n        }\n\n        .notificationJsonMsg button:hover {\n            background-color: rgba(255, 255, 255, 0.3);\n        }\n    `;\n    document.head.appendChild(styleJsonMsg); // Add the CSS to the head of the document\n}\n\n// Function to fetch and show notifications\nasync function fetchNotificationsAndShowJsonMsg() {\n    const url = 'https://raw.githubusercontent.com/DrMineword/Artefact-Boost-Active/refs/heads/main/openmessage.json';\n\n    try {\n        // Inject CSS into the page\n        injectCSSJsonMsg();\n\n        // Fetch the JSON data from the URL\n        const response = await fetch(url);\n        const data = await response.json();\n\n        if (!data || !data.data || data.data.length === 0) {\n            console.log(\"No notifications to show.\");\n            return;\n        }\n\n        // Load seen notifications from localStorage\n        const seenNotificationsJsonMsg = JSON.parse(localStorage.getItem(\"JsonMsg\") || \"[]\");\n\n        // Get the current UNIX timestamp\n        const currentTimestampJsonMsg = Math.floor(Date.now() / 1000);\n\n        // Loop through the notifications\n        data.data.forEach((notificationJsonMsg) => {\n            // Check if the notification is within the show time range\n            if (currentTimestampJsonMsg >= notificationJsonMsg['start-show-unix'] && currentTimestampJsonMsg <= notificationJsonMsg['end-show-unix']) {\n                // If the notification ID is already seen, skip it\n                if (seenNotificationsJsonMsg.includes(notificationJsonMsg.id)) {\n                    return;\n                }\n\n                // Decode base64 content if needed\n                let messageJsonMsg = notificationJsonMsg['html-msg'];\n                const base64MatchJsonMsg = messageJsonMsg.match(/<base64=([^>]+)>/);\n                if (base64MatchJsonMsg) {\n                    const decodedStringJsonMsg = atob(base64MatchJsonMsg[1]);\n                    messageJsonMsg = messageJsonMsg.replace(base64MatchJsonMsg[0], decodedStringJsonMsg); // Replace base64 placeholder with decoded string\n                }\n\n                // Create the notification element\n                const notifElementJsonMsg = document.createElement('div');\n                notifElementJsonMsg.classList.add('notificationJsonMsg');\n                notifElementJsonMsg.style.backgroundColor = notificationJsonMsg.colors[0];\n                notifElementJsonMsg.style.color = notificationJsonMsg.colors[1];\n\n                // Set the HTML content of the notification\n                notifElementJsonMsg.innerHTML = messageJsonMsg;\n\n                // Create dismiss button\n                const dismissButtonJsonMsg = document.createElement('button');\n                dismissButtonJsonMsg.textContent = 'Dismiss';\n                dismissButtonJsonMsg.style.marginLeft = '10px';\n                dismissButtonJsonMsg.onclick = () => {\n                    // Dismiss the notification when clicked\n                    notifElementJsonMsg.remove();\n\n                    // Save the notification ID as seen\n                    seenNotificationsJsonMsg.push(notificationJsonMsg.id);\n                    localStorage.setItem(\"JsonMsg\", JSON.stringify(seenNotificationsJsonMsg));\n                };\n\n                // Append dismiss button to the notification\n                notifElementJsonMsg.appendChild(dismissButtonJsonMsg);\n\n                // Add notification to the page\n                document.body.appendChild(notifElementJsonMsg);\n            }\n        });\n    } catch (error) {\n        console.error('Error fetching or displaying notifications:', error);\n    }\n}\n\n// Call the function to show notifications\nfetchNotificationsAndShowJsonMsg();\n"
}
