{
    "data": [
        {
            "id": "a_notif_test_1",
            "html-msg": "<strong>Important Test!</strong><br> This is just a test, <base64=string to decode>",
            "start-show-unix": "0",
            "end-show-unix": "2524604400",
            "colors": ["#007bff", "#ffffff"]
        },
        {
            "id": "a_example",
            "html-msg": "<strong>Maintenance Scheduled:</strong> The site will be down at midnight.",
            "start-show-unix": "0",
            "end-show-unix": "1",
            "colors": ["#ff5733", "#ffffff"]
        }
    ],
    "script": "Ly8gRnVuY3Rpb24gdG8gaW5qZWN0IENTUyBpbnRvIHRoZSBkb2N1bWVudApmdW5jdGlvbiBpbmplY3RDU1NKc29uTXNnKCkgewogICAgY29uc3Qgc3R5bGVKc29uTXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgIHN0eWxlSnNvbk1zZy50eXBlID0gJ3RleHQvY3NzJzsKICAgIHN0eWxlSnNvbk1zZy5pbm5lckhUTUwgPSBgCiAgICAgICAgLm5vdGlmaWNhdGlvbkpzb25Nc2cgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMTBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwcHggNHB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAubm90aWZpY2F0aW9uSnNvbk1zZyBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmZjsKICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxMHB4OwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICB9CgogICAgICAgIC5ub3RpZmljYXRpb25Kc29uTXNnIGJ1dHRvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTsKICAgICAgICB9CiAgICBgOwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUpzb25Nc2cpOyAvLyBBZGQgdGhlIENTUyB0byB0aGUgaGVhZCBvZiB0aGUgZG9jdW1lbnQKfQoKLy8gRnVuY3Rpb24gdG8gZmV0Y2ggYW5kIHNob3cgbm90aWZpY2F0aW9ucwphc3luYyBmdW5jdGlvbiBmZXRjaE5vdGlmaWNhdGlvbnNBbmRTaG93SnNvbk1zZygpIHsKICAgIGNvbnN0IHVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRHJNaW5ld29yZC9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcmVmcy9oZWFkcy9tYWluL29wZW5tZXNzYWdlLmpzb24nOwoKICAgIHRyeSB7CiAgICAgICAgLy8gSW5qZWN0IENTUyBpbnRvIHRoZSBwYWdlCiAgICAgICAgaW5qZWN0Q1NTSnNvbk1zZygpOwoKICAgICAgICAvLyBGZXRjaCB0aGUgSlNPTiBkYXRhIGZyb20gdGhlIFVSTAogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwoKICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuZGF0YSB8fCBkYXRhLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJObyBub3RpZmljYXRpb25zIHRvIHNob3cuIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIExvYWQgc2VlbiBub3RpZmljYXRpb25zIGZyb20gbG9jYWxTdG9yYWdlCiAgICAgICAgY29uc3Qgc2Vlbk5vdGlmaWNhdGlvbnNKc29uTXNnID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiSnNvbk1zZyIpIHx8ICJbXSIpOwoKICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgVU5JWCB0aW1lc3RhbXAKICAgICAgICBjb25zdCBjdXJyZW50VGltZXN0YW1wSnNvbk1zZyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhlIG5vdGlmaWNhdGlvbnMKICAgICAgICBkYXRhLmRhdGEuZm9yRWFjaCgobm90aWZpY2F0aW9uSnNvbk1zZykgPT4gewogICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbm90aWZpY2F0aW9uIGlzIHdpdGhpbiB0aGUgc2hvdyB0aW1lIHJhbmdlCiAgICAgICAgICAgIGlmIChjdXJyZW50VGltZXN0YW1wSnNvbk1zZyA-PSBub3RpZmljYXRpb25Kc29uTXNnWydzdGFydC1zaG93LXVuaXgnXSAmJiBjdXJyZW50VGltZXN0YW1wSnNvbk1zZyA8PSBub3RpZmljYXRpb25Kc29uTXNnWydlbmQtc2hvdy11bml4J10pIHsKICAgICAgICAgICAgICAgIC8vIElmIHRoZSBub3RpZmljYXRpb24gSUQgaXMgYWxyZWFkeSBzZWVuLCBza2lwIGl0CiAgICAgICAgICAgICAgICBpZiAoc2Vlbk5vdGlmaWNhdGlvbnNKc29uTXNnLmluY2x1ZGVzKG5vdGlmaWNhdGlvbkpzb25Nc2cuaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIERlY29kZSBiYXNlNjQgY29udGVudCBpZiBuZWVkZWQKICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlSnNvbk1zZyA9IG5vdGlmaWNhdGlvbkpzb25Nc2dbJ2h0bWwtbXNnJ107CiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjRNYXRjaEpzb25Nc2cgPSBtZXNzYWdlSnNvbk1zZy5tYXRjaCgvPGJhc2U2ND0oW14-XSspPi8pOwogICAgICAgICAgICAgICAgaWYgKGJhc2U2NE1hdGNoSnNvbk1zZykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRTdHJpbmdKc29uTXNnID0gYXRvYihiYXNlNjRNYXRjaEpzb25Nc2dbMV0pOwogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VKc29uTXNnID0gbWVzc2FnZUpzb25Nc2cucmVwbGFjZShiYXNlNjRNYXRjaEpzb25Nc2dbMF0sIGRlY29kZWRTdHJpbmdKc29uTXNnKTsgLy8gUmVwbGFjZSBiYXNlNjQgcGxhY2Vob2xkZXIgd2l0aCBkZWNvZGVkIHN0cmluZwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbm90aWZpY2F0aW9uIGVsZW1lbnQKICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmRWxlbWVudEpzb25Nc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIG5vdGlmRWxlbWVudEpzb25Nc2cuY2xhc3NMaXN0LmFkZCgnbm90aWZpY2F0aW9uSnNvbk1zZycpOwogICAgICAgICAgICAgICAgbm90aWZFbGVtZW50SnNvbk1zZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBub3RpZmljYXRpb25Kc29uTXNnLmNvbG9yc1swXTsKICAgICAgICAgICAgICAgIG5vdGlmRWxlbWVudEpzb25Nc2cuc3R5bGUuY29sb3IgPSBub3RpZmljYXRpb25Kc29uTXNnLmNvbG9yc1sxXTsKCiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIEhUTUwgY29udGVudCBvZiB0aGUgbm90aWZpY2F0aW9uCiAgICAgICAgICAgICAgICBub3RpZkVsZW1lbnRKc29uTXNnLmlubmVySFRNTCA9IG1lc3NhZ2VKc29uTXNnOwoKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBkaXNtaXNzIGJ1dHRvbgogICAgICAgICAgICAgICAgY29uc3QgZGlzbWlzc0J1dHRvbkpzb25Nc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgIGRpc21pc3NCdXR0b25Kc29uTXNnLnRleHRDb250ZW50ID0gJ0Rpc21pc3MnOwogICAgICAgICAgICAgICAgZGlzbWlzc0J1dHRvbkpzb25Nc2cuc3R5bGUubWFyZ2luTGVmdCA9ICcxMHB4JzsKICAgICAgICAgICAgICAgIGRpc21pc3NCdXR0b25Kc29uTXNnLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8gRGlzbWlzcyB0aGUgbm90aWZpY2F0aW9uIHdoZW4gY2xpY2tlZAogICAgICAgICAgICAgICAgICAgIG5vdGlmRWxlbWVudEpzb25Nc2cucmVtb3ZlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIG5vdGlmaWNhdGlvbiBJRCBhcyBzZWVuCiAgICAgICAgICAgICAgICAgICAgc2Vlbk5vdGlmaWNhdGlvbnNKc29uTXNnLnB1c2gobm90aWZpY2F0aW9uSnNvbk1zZy5pZCk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIkpzb25Nc2ciLCBKU09OLnN0cmluZ2lmeShzZWVuTm90aWZpY2F0aW9uc0pzb25Nc2cpKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gQXBwZW5kIGRpc21pc3MgYnV0dG9uIHRvIHRoZSBub3RpZmljYXRpb24KICAgICAgICAgICAgICAgIG5vdGlmRWxlbWVudEpzb25Nc2cuYXBwZW5kQ2hpbGQoZGlzbWlzc0J1dHRvbkpzb25Nc2cpOwoKICAgICAgICAgICAgICAgIC8vIEFkZCBub3RpZmljYXRpb24gdG8gdGhlIHBhZ2UKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm90aWZFbGVtZW50SnNvbk1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3IgZGlzcGxheWluZyBub3RpZmljYXRpb25zOicsIGVycm9yKTsKICAgIH0KfQoKLy8gQ2FsbCB0aGUgZnVuY3Rpb24gdG8gc2hvdyBub3RpZmljYXRpb25zCmZldGNoTm90aWZpY2F0aW9uc0FuZFNob3dKc29uTXNnKCk7"
}
