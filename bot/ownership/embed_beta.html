<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord User Presence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        async function fetchUserData() {
            const response = await fetch('https://api.lanyard.rest/v1/users/987284796789116949');
            const data = await response.json();
            const userData = data.data;

            // Set user status
            const status = userData.discord_status;
            const statusIcon = document.getElementById('status-icon');

            statusIcon.classList.remove('bg-green-500', 'bg-yellow-500', 'bg-red-500', 'bg-gray-500');

            if (status === 'online') {
                statusIcon.classList.add('bg-green-500');
            } else if (status === 'idle') {
                statusIcon.classList.add('bg-yellow-500');
            } else if (status === 'dnd') {
                statusIcon.classList.add('bg-red-500');
            } else {
                statusIcon.classList.add('bg-gray-500');
            }

            // Set user avatar and display name
            const avatarUrl = `https://cdn.discordapp.com/avatars/${userData.discord_user.id}/${userData.discord_user.avatar}.png`;
            document.getElementById('user-avatar').src = avatarUrl;
            document.getElementById('user-avatar').alt = userData.discord_user.username;
            document.getElementById('username').textContent = userData.discord_user.display_name || userData.discord_user.username;
            document.getElementById('user-handle').textContent = `@${userData.discord_user.username}`;

            // Populate activity details
            if (userData.activities && userData.activities.length > 0) {
                const activity = userData.activities[0];
                document.getElementById('activity-name').textContent = activity.name || 'No Activity';
                document.getElementById('activity-details').textContent = activity.details || 'No Details';

                // Transform "mp:" to "https://media.discordapp.net/" in large_image
                if (activity.assets?.large_image) {
                    const largeImageUrl = activity.assets.large_image.replace('mp:', 'https://media.discordapp.net/');
                    document.getElementById('activity-image').src = largeImageUrl;
                    document.getElementById('activity-image').classList.remove('hidden');
                } else {
                    document.getElementById('activity-image').src =
                        'https://media.discordapp.net/external/OiV0REGVtjwW8tfKfLoYTiGX54kAPHXoUPKm_OW1ay8/https/raw.githubusercontent.com/DrMineword/1045060846654603305_bot_images/refs/heads/master/src/img/game/portraits/portrait_WhiteStar.png';
                    document.getElementById('activity-image').classList.remove('hidden');
                }
            } else {
                document.getElementById('activity-name').textContent = 'No Activity';
                document.getElementById('activity-details').textContent = '';
                document.getElementById('activity-image').classList.add('hidden');
            }
        }

        window.onload = fetchUserData;
    </script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">
    <div class="flex flex-col bg-gray-800 rounded-lg shadow-lg w-96">
        <!-- Profile Section -->
        <div class="flex items-center p-4 border-b border-gray-700">
            <div class="relative">
                <img id="user-avatar"
                     src=""
                     alt="User Avatar"
                     class="w-16 h-16 rounded-full">
                <span id="status-icon"
                      class="absolute bottom-0 right-0 w-5 h-5 rounded-full border-2 border-gray-800"></span>
            </div>
            <div class="ml-4">
                <h1 id="username" class="text-lg font-semibold">Loading...</h1>
                <p id="user-handle" class="text-gray-400 text-sm">@Loading</p>
            </div>
        </div>

        <!-- Activity Section -->
        <div class="flex items-center p-4">
            <img id="activity-image"
                 src=""
                 alt="Activity Image"
                 class="w-12 h-12 rounded-lg hidden">
            <div class="ml-4">
                <h3 id="activity-name" class="text-sm font-semibold">No Activity</h3>
                <p id="activity-details" class="text-gray-400 text-sm">No Details</p>
            </div>
        </div>
    </div>
</body>
</html>
